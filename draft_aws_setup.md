**タイトル:**
**【図解】AWSアカウント作成＆セキュリティ設定の完全ガイド（IAM・MFA・予算設定）**

---

### はじめに：AWSを「安全」に使うために

「AWSを使ってみたいけど、設定が難しそう……」
「高額請求が来ないか心配……」

これからAWSを始める方にとって、最初のアカウント作成とセキュリティ設定は一番のハードルですよね。
実は、AWSのアカウントを作った直後の状態（ルートユーザー）で開発を進めるのは、**セキュリティ的に非常に危険**です。

この記事では、AWS初心者が最初にやるべき**「安全なアカウント設定」**と、開発に必要な**「適切な権限設定」**を、図解付きでステップ・バイ・ステップで解説します。

この記事を読み終わる頃には、プロのエンジニアと同じ「セキュアな開発環境」が整っています。

---

### Step 1: AWSアカウントの作成

まずはAWSのアカウントを作成します。
公式サイトにアクセスし、手順に従って登録を進めてください。

* **公式サイト:** [AWS アカウント作成ページ](https://portal.aws.amazon.com/billing/signup)

**💡 登録時のポイント**
* **クレジットカード/デビットカード:** 登録に必須です（無料枠の利用でも必要）。
* **本人確認:** SMS（ショートメッセージ）または電話での認証が必要です。
* **プラン選択:** 特別な理由がなければ「ベーシックサポート（無料）」を選択してください。

---

### Step 2: ルートユーザーを封印せよ！

アカウント作成時に設定したメールアドレスとパスワードでログインしている状態を、**「ルートユーザー」**と呼びます。

これは、アカウントの解約から契約変更まで**何でもできてしまう「神の権限」**です。
もしこのパスワードが流出すると、アカウントを乗っ取られて高額なリソースを勝手に使われるなどの被害に遭う可能性があります。

**⚠️ 鉄の掟:**
**「ルートユーザーは、最初の設定と緊急時以外は絶対に使わない」**

普段の開発には、権限を制限した**「IAMユーザー」**を作成して使うのがAWSのベストプラクティスです。次のステップで、そのIAMユーザーを作成しましょう。

---

### Step 3: 最強のIAMユーザーを作る

ここがこの記事のハイライトです。
開発ツール（Serverless Framework）が、あなたの代わりにAWSを操作するための「専用ユーザー」を作成します。

今回は、**「開発に必要な権限だけを持ち、余計な操作はできない」** 安全な構成を目指します。

1.  **IAMユーザーの作成画面へ**
    * AWSコンソールの検索窓で「IAM」と検索し、「ユーザー」→「ユーザーを作成」をクリックします。
2.  **ユーザー名の入力**
    * 分かりやすい名前を付けます。（例: `serverless-deploy-user`）
    * **【重要】** 「AWSマネジメントコンソールへのアクセスを提供する」に**チェックを入れます**。
    * 「IAMユーザーを作成します」を選択し、パスワード設定などはデフォルトのままで進みます。
    > **※注釈:** 本来、プログラムからのデプロイ専用ユーザーにはログイン権限を与えませんが、今回は学習用としてエラー時にログを確認しやすくするため、特別にログインも許可します。
3.  **許可の設定（重要！）**
    * 「**ポリシーを直接アタッチ**」を選択します。
    * 検索窓を使って、以下の **6つのポリシー** を検索し、すべてにチェックを入れてください。

| ポリシー名 | 役割（なぜ必要なのか？） |
| :--- | :--- |
| **`AWSLambda_FullAccess`** | Lambda関数を作成・更新するために必要。 |
| **`AmazonAPIGatewayAdministrator`** | APIのエンドポイント（URL）を作成するために必要。 |
| **`AWSCloudFormationFullAccess`** | Serverless Frameworkが裏側で使用する「構成管理ツール」を操作するために必要。 |
| **`AmazonS3FullAccess`** | デプロイするコードを一時的に保存するストレージ（S3）を操作するために必要。 |
| **`CloudWatchLogsFullAccess`** | アプリケーションのログを保存する設定を行うために必要。 |
| **`IAMFullAccess`** | Lambda関数が動くための「実行ロール」を自動作成するために必要。 |

> **💡 コラム：なぜ `AdministratorAccess` じゃダメなの？**
> 「`AdministratorAccess`」というポリシーを1つ付ければ、全権限が与えられて楽ですが、万が一鍵が漏れた時に被害が甚大になります。面倒でも「必要な権限だけ渡す（最小権限の原則）」のがエンジニアの嗜みです。
> （※今回は学習の簡便さのため `IAMFullAccess` を含めていますが、実務ではさらに権限を絞るのが一般的です）

4.  **アクセスキーの作成**
    * ユーザー作成後、そのユーザーをクリックし、「セキュリティ認証情報」タブを開きます。
    * 「アクセスキーを作成」→「**コマンドラインインターフェイス (CLI)**」を選択します。
    * 生成された **「アクセスキーID」** と **「シークレットアクセスキー」** をメモします。
    * **注意:** シークレットキーはこの画面でしか見られません！必ずこの場で安全な場所に保存してください。

これで、「開発専用の鍵」が手に入りました。

---

### Step 4: 【必須】ルートユーザーにMFA（多要素認証）を設定する

IAMユーザーができたら、普段使わない「ルートユーザー」には鍵をかけましょう。
パスワードだけでなく、スマホアプリのワンタイムパスワードがないとログインできないように設定します（MFA）。

1.  画面右上のアカウント名をクリックし、「**セキュリティ認証情報**」を選択。
2.  「**MFA (多要素認証)**」セクションで「**MFA デバイスの割り当て**」をクリック。
3.  デバイス名（例: `MyPhone`）を入力し、「**認証アプリ**」を選択。
4.  スマホに認証アプリ（**Google Authenticator** や **Authy** など）をインストールし、画面のQRコードを読み取ります。
5.  アプリに表示された6桁の数字を2回分入力して設定完了です。

これで、もしパスワードが流出してもアカウントは守られます。

---

### Step 5: 【安心】予算アラートを設定する

「気づかないうちに課金されていたらどうしよう……」
そんな不安をなくすために、**「無料枠を超えたらメールが届く」** 設定をしておきましょう。

1.  コンソールの検索窓で「**AWS Budgets**」と検索して開きます。
2.  「**予算を作成**」をクリックします。
3.  **「テンプレートを使用（簡素化）」** を選択し、**「ゼロスペンド予算 (Zero spend budget)」** にチェックを入れます。
    * これだけで、「AWSの利用料が$0.01（約1円）を超えたら即通知」という設定になります。
4.  **メール受信者**欄に、あなたのメールアドレスを入力し、「予算を作成」をクリックします。

これで、万が一無料枠を超えそうになってもすぐに気づけるので、安心して開発に集中できます。

---

### まとめ

お疲れ様でした！これでAWSの準備は完璧です。

1.  **ルートユーザー:** MFAで封印済み。
2.  **IAMユーザー:** 安全なデプロイ権限と、デバッグ用のログイン権限を持ったユーザーを作成済み。
3.  **予算アラート:** 1円でも課金されたら通知が来る設定済み。

この状態で開発を始めれば、無用なトラブルやセキュリティリスクを避けられます。
それでは、準備が整った「アクセスキー」を持って、メイン記事の開発パートへ進みましょう！